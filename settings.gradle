plugins {
    id "com.gradle.enterprise" version "3.1.1"
}

rootProject.name = 'brightspot-training'

include(':core')
include(':web')
include(':frontend')
include(':bundle-default')

project(':core').projectDir = file('core')
project(':web').projectDir = file('web')
project(':frontend').projectDir = file('frontend')
project(':bundle-default').projectDir = file('frontend/bundles/bundle-default')

// -- Gradle Cache Server -- //

def gradleCacheUrl = "https://cache.gradle.psdops.com/cache/"
def gradleCacheUsername = System.getenv('GRADLE_CACHE_USERNAME')
def gradleCachePassword = System.getenv('GRADLE_CACHE_PASSWORD')
boolean isCiServer = gradleCacheUsername != null

buildCache {
  if (gradleCacheUrl != null) {
    local {
      enabled = !isCiServer
    }
    remote(HttpBuildCache) {
      push = isCiServer
      url = gradleCacheUrl
      allowUntrustedServer = true
      if (gradleCacheUsername != null && gradleCachePassword != null) {
        credentials {
            username = gradleCacheUsername
            password = gradleCachePassword
        }
      }
    }
  }
}
